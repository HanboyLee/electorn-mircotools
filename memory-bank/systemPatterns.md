# 系統模式

本文檔概述了系統架構、關鍵技術決策和項目中使用的設計模式。

## 架構概述

### 進程架構
1. **主進程**
   - 系統交互（文件系統、網絡檢測）
   - 應用程序生命週期管理
   - 核心服務（EXIF 元數據、CSV 生成）
   - IPC 通信初始化

2. **渲染進程**
   - 基於 React 的用戶界面
   - 用戶交互處理
   - 基於狀態的數據顯示

3. **預加載/IPC 層**
   - 安全核心 API 暴露
   - IPC 通信協議
   - 數據橋接實現

## 核心模塊

### 1. EXIF 解析器
- 位置：`/src/core/exif/`
- 目的：使用 ExifTool 解析圖像元數據
- 標準化數據輸出

### 2. CSV 生成器
- 位置：`/src/core/csv/`
- 目的：CSV 文件導出和生成
- 自定義字段映射支持

### 3. 設置管理
- 位置：`/src/hooks/SettingsStore/`
- 目的：用戶偏好和 API 測試
- OpenAI API 連接測試

### 4. 網絡監控
- 位置：`/src/services/networkService.ts`
- 目的：實時連接狀態
- 響應時間監控

## 設計模式

1. **模塊模式**
   - 清晰的關注點分離
   - 封裝功能
   - 易於維護和測試

2. **觀察者模式**
   - 網絡狀態更新
   - 進度追踪
   - UI 狀態管理

3. **工廠模式**
   - 服務實例化
   - 組件創建

4. **單例模式**
   - 設置存儲
   - 網絡服務
   - 文件服務

## 數據流
1. 渲染器中的用戶操作
2. IPC 消息到主進程
3. 核心服務執行
4. 結果傳播
5. UI 狀態更新
